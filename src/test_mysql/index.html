<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ulrich The Keeper</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">


    <link rel="stylesheet" href="../assets/css/login_style.css">

</head>

<body>

    <div class="login-dark">
        <form id="myForm_index" method="POST" >
            <h2 class="sr-only">Login Form</h2>
            <div class="illustration"><i class="icon ion-ios-locked-outline"></i></div>
            <div class="form-group"><input id=form_index_login class="form-control" type="text" name="login" placeholder="Login" required></div>
            <div class="form-group"><input id=form_index_password class="form-control" type="password" name="password" placeholder="Password" aria-describedby="PasswordHelp" required></div>
            <small id="PasswordHelp" class="form-text text-muted">Enter your credentials to unlock your vault </small>

<!-- MARCHE PAS EN SUBMIT -->
           <!-- <div class="form-group">
              <button id=myBtn class="btn btn-primary btn-block" type="submit" >Log In</button>
            </div> -->
            <!-- MARCHE OK  -->
            <div class="form-group">
              <button id=myBtn class="btn btn-primary btn-block" type="button" >Log In</button>
            </div>

            <!-- MARCHE PAS EN SUBMIT MAIS BUTTON OK<div class="form-group">
              <input id=myBtn class="btn btn-primary btn-block" type="submit" >Log In</input>
            </div> -->

            <a href="register.html" class="forgot">Click here to register</a>

        </form>
    </div>


    <!-- Placing scripts at the bottom of the <body> element improves the display speed, because script interpretation slows down the display. -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>

    <script src="../../mvc/model/database_function.js"></script>
    <script src="../../mvc/controller/index.js"></script>

<script>
// document.getElementById("myBtn").onclick=toto;
document.getElementById("myBtn").addEventListener("click", login_index);
function toto(){
  alert("toto")
}

function tata(){
  var mysql = require("mysql");
  var bcrypt = require('bcryptjs');
  var db_config = require('../../../server/database_config.js');
  const remote = require('electron').remote;

  //get config database
  var host = db_config.db_host;
  var user = db_config.db_user;
  var password = db_config.db_password;
  var name_database = db_config.db_name;

  // //prepare database connection
  var connection = mysql.createConnection({
    host: host,
    user: user,
    password: password,
    database: name_database,
    connectTimeout: 60000
  });

connection.connect(function(err){
  if (err) throw err;

  alert('ok co');
});

  alert('14.1')
  //AWAIT JS
  connection.query({sql: 'SELECT * FROM `users`', timeout: 60000},function (error, results, fields) {
    if (error) throw alert(error);
    alert('14.2');
    // alert(result[0].username)

  });

  alert('13')
  connection.end();

// alert('15')
//   var sqlite3 = require('sqlite3');
//   alert('16')
//
//     //create database if not exist
//   var db = new sqlite3.Database('./src/webapp/mvc/databases/mydb.db')
//   alert('17')
//
//   db.run("CREATE TABLE if not exists users (id_user INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT NOT NULL, user_password TEXT NOT NULL)");
//   alert('18')
//
//   db.run('INSERT INTO users(username,user_password) VALUES(?,?)', ["toto","pouet"]);
//   alert('19')
//
//       db.each("SELECT username FROM users", function(err, row) {
//           alert(row.username);
//       });
//       alert('20')
//
//       db.close();
}
// <form id="myForm_index" method="POST" onsubmit="login_index()">
//onclick="login_index()"
</script>


</body>

</html>
